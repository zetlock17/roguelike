import os
import time
import random
from colorama import Fore, Back, Style, init
from input_handler import get_char



"""introductory_screen.py - Ğ²ÑÑ‚ÑƒĞ¿Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ÑĞºÑ€Ğ°Ğ½ Ğ¸Ğ³Ñ€Ñ‹
show_title_screen() - Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµÑ‚ Ğ·Ğ°ÑÑ‚Ğ°Ğ²ĞºÑƒ 
transition_to_game() - Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ° Ğº Ğ¸Ğ³Ñ€Ğµ"""



ITALIC_ON = "\033[3m"
ITALIC_OFF = "\033[23m"
subtitle = Fore.RED + Style.DIM
reset = Fore.RESET + Style.RESET_ALL
gun = Fore.YELLOW + Style.DIM


def show_title_screen():
    os.system('cls' if os.name == 'nt' else 'clear')
                                                                                                                           
    print("â–ˆâ–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–ˆ")
    print("â–ˆ                                                                                                              â–ˆ")
    print("â–ˆ                                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                              â–ˆ")
    print("â–ˆ                                â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•                              â–ˆ")
    print("â–ˆ                                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                                â–ˆ")
    print("â–ˆ                                â–ˆâ–ˆâ•”â•â•â•  â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•”â•â•â•                                â–ˆ")
    print("â–ˆ                                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                              â–ˆ")
    print("â–ˆ                                â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•     â•šâ•â•â•â•â•â•â•                              â–ˆ")
    print("â–ˆ                                                                                                              â–ˆ")
    print("â–ˆ                                                                                                              â–ˆ")
    print("â–ˆ                                                                                                              â–ˆ")
    print("â–ˆ                                                                                                              â–ˆ")
    print("â–ˆ"+ITALIC_ON+"                                Ğ’Ñ‹ - ÑĞµÑ€Ğ¸Ğ¹Ğ½Ñ‹Ğ¹ ÑƒĞ±Ğ¸Ğ¹Ñ†Ğ° Ğ½Ğ° Ğ¿Ğ¾Ğ¶Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ğ¾Ğ¼ Ğ·Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¸"+ITALIC_OFF+"                                â–ˆ")
    print("â–ˆ"+ITALIC_ON+"                          Ğ’ Ñ‚ÑÑ€ÑŒĞ¼Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞµĞ» ÑĞ±Ğ¾Ğ¹, Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²ÑˆĞ¸Ğ¹ Ğ²ÑĞµ Ğ´Ğ²ĞµÑ€Ğ¸, ĞºÑ€Ğ¾Ğ¼Ğµ Ğ¾Ğ´Ğ½Ğ¾Ğ¹..."+ITALIC_OFF+"                        â–ˆ")
    print("â–ˆ"+ITALIC_ON+"                           ĞĞ°Ğ¹Ğ´Ğ¸ Ñ‚Ñ€Ğ¸ ĞºĞ»ÑÑ‡Ğ° Ğ¸ ÑĞ¾Ğ²ĞµÑ€ÑˆĞ¸ Ğ¿Ğ¾Ğ±ĞµĞ³. ĞĞ¾ Ğ±ÑƒĞ´ĞµÑ‚ Ğ»Ğ¸ ÑÑ‚Ğ¾ Ñ‚Ğ°Ğº Ğ»ĞµĞ³ĞºĞ¾?"+ITALIC_OFF+"                        â–ˆ")
    print("â–ˆ                                                                                                              â–ˆ")
    print("â–ˆ                                                                                                              â–ˆ")
    print("â–ˆ                                                                                                              â–ˆ")
    print("â–ˆ                                                     .-.                                                      â–ˆ")
    print("â–ˆ                                                    (Ò‚""\033[31m`\033[0m""_""\033[31mÂ´\033[0m"")                                                    â–ˆ")
    print("â–ˆ                                                   <,""\033[38;5;130mï¸»\033[0m""\033[30mâ•¦â•¤\033[0m""\033[38;5;130mâ”€\033[0m""ğŸ’¥                                                  â–ˆ")
    print("â–ˆ                                                    _/ \_                                                     â–ˆ")
    print("â–ˆ                                                                                                              â–ˆ")
    print("â–ˆ                                         â–„â–ˆâ–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–ˆâ–„                                         â–ˆ")
    print("â–ˆ                                       â–„â–ˆâ–€                          â–€â–ˆâ–„                                       â–ˆ")
    print("â–ˆ                                     â–„â–ˆâ–€"+subtitle+"     ĞĞĞ–ĞœĞ˜Ğ¢Ğ• Ğ›Ğ®Ğ‘Ğ£Ğ® ĞšĞ›ĞĞ’Ğ˜Ğ¨Ğ£    "+reset+"â–€â–ˆâ–„                                     â–ˆ")
    print("â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€                                  â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€")

    
    get_char()




def transition_to_game():
    title_screen_lines = [
        "â–ˆâ–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–ˆ",
        "â–ˆ                                                                                                              â–ˆ",
        "â–ˆ                                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                              â–ˆ",
        "â–ˆ                                â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•                              â–ˆ",
        "â–ˆ                                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                                â–ˆ",
        "â–ˆ                                â–ˆâ–ˆâ•”â•â•â•  â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•”â•â•â•                                â–ˆ",
        "â–ˆ                                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                              â–ˆ",
        "â–ˆ                                â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•     â•šâ•â•â•â•â•â•â•                              â–ˆ",
        "â–ˆ                                                                                                              â–ˆ",
        "â–ˆ                                                                                                              â–ˆ",
        "â–ˆ                                                                                                              â–ˆ",
        "â–ˆ                                                                                                              â–ˆ",
        "â–ˆ"+ITALIC_ON+"                                Ğ’Ñ‹ - ÑĞµÑ€Ğ¸Ğ¹Ğ½Ñ‹Ğ¹ ÑƒĞ±Ğ¸Ğ¹Ñ†Ğ° Ğ½Ğ° Ğ¿Ğ¾Ğ¶Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ğ¾Ğ¼ Ğ·Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¸"+ITALIC_OFF+"                                â–ˆ",
        "â–ˆ"+ITALIC_ON+"                          Ğ’ Ñ‚ÑÑ€ÑŒĞ¼Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞµĞ» ÑĞ±Ğ¾Ğ¹, Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²ÑˆĞ¸Ğ¹ Ğ²ÑĞµ Ğ´Ğ²ĞµÑ€Ğ¸, ĞºÑ€Ğ¾Ğ¼Ğµ Ğ¾Ğ´Ğ½Ğ¾Ğ¹..."+ITALIC_OFF+"                        â–ˆ",
        "â–ˆ"+ITALIC_ON+"                           ĞĞ°Ğ¹Ğ´Ğ¸ Ñ‚Ñ€Ğ¸ ĞºĞ»ÑÑ‡Ğ° Ğ¸ ÑĞ¾Ğ²ĞµÑ€ÑˆĞ¸ Ğ¿Ğ¾Ğ±ĞµĞ³. ĞĞ¾ Ğ±ÑƒĞ´ĞµÑ‚ Ğ»Ğ¸ ÑÑ‚Ğ¾ Ñ‚Ğ°Ğº Ğ»ĞµĞ³ĞºĞ¾?"+ITALIC_OFF+"                        â–ˆ",
        "â–ˆ                                                                                                              â–ˆ",
        "â–ˆ                                                                                                              â–ˆ",
        "â–ˆ                                                                                                              â–ˆ",
        "â–ˆ                                                     .-.                                                      â–ˆ",
        "â–ˆ                                                    (Ò‚""\033[31m`\033[0m""_""\033[31mÂ´\033[0m"")                                                    â–ˆ",
        "â–ˆ                                                   <,""\033[38;5;130mï¸»\033[0m""\033[30mâ•¦â•¤\033[0m""\033[38;5;130mâ”€\033[0m""ğŸ’¥                                                  â–ˆ",
        "â–ˆ                                                    _/ \_                                                     â–ˆ",
        "â–ˆ                                                                                                              â–ˆ",
        "â–ˆ                                         â–„â–ˆâ–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–ˆâ–„                                         â–ˆ",
        "â–ˆ                                       â–„â–ˆâ–€                          â–€â–ˆâ–„                                       â–ˆ",
        "â–ˆ                                     â–„â–ˆâ–€"+subtitle+"     ĞĞĞ–ĞœĞ˜Ğ¢Ğ• Ğ›Ğ®Ğ‘Ğ£Ğ® ĞšĞ›ĞĞ’Ğ˜Ğ¨Ğ£    "+reset+"â–€â–ˆâ–„                                     â–ˆ",
        "â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€                                  â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€"
    ] 

    def clear_screen():
        os.system('cls' if os.name == 'nt' else 'clear')

    colors = [Fore.RED, Fore.MAGENTA, Fore.CYAN, Fore.WHITE]

    for step in range(15):
        clear_screen()
        for i, line in enumerate(title_screen_lines):
           
            offset = random.randint(-1, 1) if step < 10 else 0
            glitch_line = (" " * abs(offset) + line[:len(line) - abs(offset)]) if offset >= 0 else (line[abs(offset):] + " " * abs(offset))
            
            
            if step < 12 and random.random() < 0.3:
                glitch_line = list(glitch_line)
                for _ in range(random.randint(1, 5)):
                    pos = random.randint(0, len(glitch_line) - 1)
                    glitch_line[pos] = random.choice(["#", "@", "%", "&", "â–ˆ", "â–’"])
                glitch_line = "".join(glitch_line)
            
            
            color = random.choice(colors) if step < 10 and random.random() < 0.4 else Fore.RESET
            
            style = Style.DIM if step > 8 and random.random() < step * 0.05 else Style.NORMAL
            
            print(color + style + glitch_line + Style.RESET_ALL)
        time.sleep(0.02)

    
    for step in range(20):
        clear_screen()
        for i, line in enumerate(title_screen_lines):
            faded_line = ""
            
            wave = abs((i + step) % 10 - 5) / 5
            threshold = step * 0.06 + wave * 0.2
            
            for char in line:
                if random.random() < threshold:
                    faded_line += " "
                else:
                    faded_line += char
            
            
            color = Fore.LIGHTBLACK_EX if step > 10 else Fore.RESET
            style = Style.DIM if step > 12 else Style.NORMAL
            print(color + style + faded_line + Style.RESET_ALL)
        # time.sleep(0.03)



    clear_screen()